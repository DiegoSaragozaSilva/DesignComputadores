<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <style>
  /* fundo para o trecho de código */
  div.sourceCode { overflow-x: auto; background-color: rgb(250,250,250);}
  
  .bloco .title {
      display: block;
  }
  
  /*Bloco de solucao de exercicio*/
  .bloco .label,
  .bloco .separator {
      font-weight: bold;
  }
  
  .bloco .separator {
      margin-right: .6em;
  }
  /* Solução */
  div.solucao {
    border-left: .3em solid #dd4444;   /*#dc3c01; */
    margin-left: -.8em;
    padding-left: .4em;
    position: relative;
    font-size: 90%;
  }
  
  div.solucao .conteudo {
    display: none;
    padding-top: 1px;
  }
  
  div.solucao button {
    color: #0000AF;
    background-color: white;
    border-radius: 5px;
  }
  
  div.solucao button.viewed {
    color: #FF2020;
    background-color: white;
    border-radius: 5px;
  }
  
  /* Alinhamento dos títulos e parágrafos */
  
  body{margin-left: 5%; margin-right: 5%;
           color: black; background: white;}
  
  hr{
      margin-left: -4%;
      background-color: rgb(0,100,100);  /*anterior:    240,240,240 */
  }
  h1{
      margin-left: -4%;
      background-color: rgb(210,210,220);
  }
  
  h2{
      margin-left: -4%;
      background-color: rgb(220,220,230);
  }
  
  h3{
      margin-left: -4%;
      background-color: rgb(230,230,240);
  }
  
  h4{
      margin-left: -4%;
      background-color: rgb(240,240,250);
  }
  
  /* Cores */
  i{color: red}
  em{color: green}
  cite{color: brown}
  /* blockquote > p { */
  blockquote{color: red}
  blockquote p {
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 300;
    line-height: 2em;
  }
  
  /* ---- Front Matter ----
  Pandoc header DIV. Contains .title, .author and .date. Comes before div#TOC.
  Only appears if one of those three are in the document.   */
  
  div#header, header
      {
      /* Put border on bottom. Separates it from TOC or body that comes after it. */
      border-bottom: 1px solid #aaa;
      margin-bottom: 0.5em;
      }
  
  .title /* Pandoc title header (h1.title) */
      {
      text-align: center;
      }
  
  .author, .date /* Pandoc author(s) and date headers (h2.author and h3.date) */
      {
      text-align: center;
      }
  
  /* Pandoc table of contents DIV when using the --toc option.
     NOTE: this doesn't support Pandoc's --id-prefix option for #TOC and #header.
     Probably would need to use div[id$='TOC'] and div[id$='header'] as selectors.
  */
  
  div#TOC, nav#TOC
      {
      /* Put border on bottom to separate it from body. */
      border-bottom: 1px solid #aaa;
      margin-bottom: 0.5em;
      }
  
  @media print
      {
      div#TOC, nav#TOC
          {
          /* Don't display TOC in print */
          display: none;
          }
      }
  /* ---- Images ---- */
  img
      {
      /* Let it be inline left/right where it wants to be, but verticality make
         it in the middle to look nicer, but opinions differ, and if in a multi-line
         paragraph, it might not be so great.
         vertical-align: middle;
      */
      vertical-align: middle;
      }
  div.figure /* Pandoc figure-style image */
      {
      /* Center the image and caption */
      margin-left: auto;
      margin-right: auto;
      text-align: center;
      font-style: italic;
      }
  p.caption /* Pandoc figure-style caption within div.figure */
      {
      /* Inherits div.figure props by default */
      }
  /*Tamanho absoluto das imagens definidas em markdown*/
  img[src*='#200'] {
    text-align: center;
    width: 200px;
  }
  img[src*='#400'] {
    text-align: center;
    width: 400px;
  }
  img[src*='#600'] {
    text-align: center;
    width: 600px;
  }
  img[src*='#800'] {
    text-align: center;
    width: 800px;
  }
  /*Tamanho relativo das imagens definidas em markdown*/
  img[src*='#p80'] {
    text-align: center;
    width: 80%;
  }
  img[src*='#p70'] {
    text-align: center;
    width: 70%;
  }
  img[src*='#p60'] {
    text-align: center;
    width: 60%;
  }
  img[src*='#p50'] {
    text-align: center;
    width: 50%;
  }
  img[src*='#p40'] {
    text-align: center;
    width: 40%;
  }
  img[src*='#p30'] {
    text-align: center;
    width: 30%;
  }
  img[src*='#p20'] {
    text-align: center;
    width: 20%;
  }
  img[src*='#p10'] {
    text-align: center;
    width: 10%;
  }
  /* ---- Tables ---- */
  table {
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 24px;
      border-spacing: 0;
      border-bottom: 2px solid black;
      border-top: 2px solid black;
  }
  table th {
      padding: 3px 10px;
      background-color: white;
      border-top: 1px;
      border-left: 1px;
      border-right: 1px;
      border-bottom: 1px solid black;
  }
  table td {
      padding: 3px 10px;
      border-top: 1px;
      border-left: 1px;
      border-bottom: 1px;
      border-right: 1px;
  }
  /* fundo para as linhas das tabelas */
  tr.even{
    background-color: rgb(250,250,255);
  }
  tr.odd{
    background-color: rgb(250,250,250);
  }
  </style>
  <script type="text/javascript">
      function exibe(e)
      {
          var div = e.parentNode.firstElementChild;
          var nome = e.parentNode.id;
          var tipo=nome.substring(0, 3).toUpperCase()
          if ( tipo == "SOL"){
              nome = "Solução";
          }
          if (div.style.display == "" || div.style.display == "none") {
              div.style.display = "block";
              e.setAttribute("class", "viewed");
              e.innerHTML = "Esconder ";
          } else {
              div.style.display = "none";
              e.innerHTML = "Ver "+nome;
          }
      }
      function validaBinario(nome) {
          var valor, tamanho, i;
          document.getElementById(nome).style.color = "black";
          valor = document.getElementById(nome).value;
          tamanho=valor.length;
          for (i=0;i<tamanho; i=i+1){
              if ( valor[i] != 1 && valor[i] != 0 ){
                  document.getElementById(nome).style.color = "red";
              }
          }
      }
  </script>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#aula-11-decomposição-de-instruções-do-tipo-i">Aula 11: Decomposição de Instruções do Tipo I</a><ul>
<li><a href="#contextualização">Contextualização</a><ul>
<li><a href="#instruções-do-tipo-i">Instruções do tipo I</a></li>
<li><a href="#formato-das-instruções-do-tipo-i">Formato das instruções do tipo I</a><ul>
<li><a href="#exemplo-de-branch-on-equal">Exemplo de Branch on Equal</a></li>
<li><a href="#exemplo-de-load">Exemplo de Load</a></li>
<li><a href="#exemplo-de-store">Exemplo de Store</a></li>
</ul></li>
</ul></li>
<li><a href="#exercício-a">Exercício A</a></li>
<li><a href="#exercício-b">Exercício B</a></li>
<li><a href="#exercício-c">Exercício C</a></li>
<li><a href="#atividade">Atividade</a><ul>
<li><a href="#dicas">Dicas</a></li>
</ul></li>
<li><a href="#referências">Referências</a><ul>
<li><a href="#rtn">RTN</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<p><a name="inicio"></a></p>
<h1 id="aula-11-decomposição-de-instruções-do-tipo-i">Aula 11: Decomposição de Instruções do Tipo I</h1>
<h2 id="contextualização">Contextualização</h2>
<h3 id="instruções-do-tipo-i">Instruções do tipo I</h3>
<p>As instruções desse tipo:</p>
<ul>
<li><p>Não possuem só uma opção para o campo de opcode, como as do tipo R;</p></li>
<li><p>Possuem dois campos de registradores: Rs e Rt;</p></li>
<li><p>Possuem um campo com um valor imediato:</p>
<ul>
<li><p>Esse valor, de 16 bits, está codificado na instrução;</p></li>
<li><p>E representa um <strong>inteiro com sinal</strong>.</p></li>
</ul></li>
</ul>
<p>São utilizadas para:</p>
<ul>
<li><p>Carregar valores imediatos (constantes) nos registradores;</p></li>
<li><p>Fazer operações lógicas e aritméticas com valores imediatos, por exemplo:</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">            addi rs, <span class="dt">rt</span>, #valor<span class="co">;</span></code></pre></div>
<ul>
<li><p>Escrever na memória (sw);</p></li>
<li><p>Ler da memória (lw);</p></li>
<li><p>Fazer desvios condicionais (beq).</p></li>
</ul>
<p><br></p>
<p>As instruções desse tipo, para a nossa implementação, são:</p>
<ul>
<li><p>Load word: lw;</p></li>
<li><p>Store word: sw;</p></li>
<li><p>Branch on equal: beq.</p></li>
</ul>
<p><br></p>
<h3 id="formato-das-instruções-do-tipo-i">Formato das instruções do tipo I</h3>
<p>Lembrando dos campos existentes, no MIPS DLX, para as instruções em geral:</p>
<table>
<thead>
<tr class="header">
<th align="center">opcode</th>
<th align="center">Rs</th>
<th align="center">Rt</th>
<th align="center">Rd</th>
<th align="center">shamt</th>
<th align="center">funct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">6 bits</td>
</tr>
<tr class="even">
<td align="center">MSB (b31)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">LSB (b0)</td>
</tr>
</tbody>
</table>
<p>A instrução do tipo I agrupa os campos:</p>
<ul>
<li><p><strong>Rd</strong></p></li>
<li><p><strong>shamt</strong></p></li>
<li><p><strong>funct</strong></p></li>
</ul>
<p>Para formar o campo <strong>imediato</strong>, necessário ao funcionamento dessa instrução.</p>
<table>
<thead>
<tr class="header">
<th>opcode</th>
<th>Rs</th>
<th>Rt</th>
<th>imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>16 bits</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>31~26</td>
<td>25~ 21</td>
<td>20~16</td>
<td>15~0</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="exemplo-de-branch-on-equal">Exemplo de Branch on Equal</h4>
<p>Sintaxe:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    beq  <span class="dv">$</span>rs,  <span class="dv">$</span>rt,  imediato</code></pre></div>
<p>Sua operação:</p>
<blockquote>
<p>PC += (R[rs] == R[rt] ? 4 + distancia : 4);</p>
</blockquote>
<p>Onde:</p>
<p>distancia=(14@imediato&lt;15&gt;#imediato&lt;15..0&gt;#0#0);</p>
<h4 id="exemplo-de-load">Exemplo de Load</h4>
<p>Sintaxe:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    lw  <span class="dv">$</span>rt,  imediato(<span class="dv">$</span>rs)<span class="co">;</span></code></pre></div>
<p>Operação:</p>
<blockquote>
<p>R[rt] = M[R[rs]+extSinal(imediato)]</p>
</blockquote>
<p>Onde:</p>
<p>extSinal = (16@imediato&lt;15&gt;#imediato&lt;15..0&gt;)</p>
<h4 id="exemplo-de-store">Exemplo de Store</h4>
<p>Sintaxe:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    sw  <span class="dv">$</span>rt,  imediato(<span class="dv">$</span>rs)<span class="co">;</span></code></pre></div>
<p>Operação:</p>
<blockquote>
<p>M[R[rs]+extSinal(imediato)] = R[rt]</p>
</blockquote>
<p>Onde:</p>
<p>extSinal = (16@imediato&lt;15&gt;#imediato&lt;15..0&gt;)</p>
<hr />
<p><br></p>
<h2 id="exercício-a">Exercício A</h2>
<p>Para a instrução:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">  beq  <span class="dv">$</span>t0, <span class="dv">$</span>t1, <span class="bn">0x500</span>:</code></pre></div>
<p>Qual seria a sua codificação?</p>
<table>
<thead>
<tr class="header">
<th align="center">opcode</th>
<th align="center">Rs</th>
<th align="center">Rt</th>
<th align="center">imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">16 bits</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center"><input type="text" id="A1" value="" maxlength="6" size="6" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td align="center"><input type="text" id="A2" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td align="center"><input type="text" id="A3" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td align="center"><input type="text" id="A4" value="" maxlength="16" size="16" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">31~26</td>
<td align="center">25~ 21</td>
<td align="center">20~16</td>
<td align="center">15~0</td>
</tr>
</tbody>
</table>
<div id="sol-ExA" class="bloco solucao">
<div class="conteudo">
<p style="color:red">
Solução:
</p>
<table>
<thead>
<tr class="header">
<th align="center">opcode</th>
<th align="center">Rs</th>
<th align="center">Rt</th>
<th align="center">imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">16 bits</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">000100</td>
<td align="center">01000</td>
<td align="center">01001</td>
<td align="center">0000.0101.0000.0000</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">31~26</td>
<td align="center">25~ 21</td>
<td align="center">20~16</td>
<td align="center">15~0</td>
</tr>
</tbody>
</table>
</div>
<button onclick="exibe(this)">
Ver Solução
</button>
</div>
<hr />
<p><br></p>
<h2 id="exercício-b">Exercício B</h2>
<p>Para a instrução:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    lw  <span class="dv">$</span>t0,  <span class="bn">0x48</span>(<span class="dv">$</span>sp)</code></pre></div>
<p>Qual seria a sua codificação?</p>
<table>
<thead>
<tr class="header">
<th>opcode</th>
<th>Rs</th>
<th>Rt</th>
<th>imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>16 bits</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><input type="text" id="B1" value="" maxlength="6" size="6" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="B2" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="B3" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="B4" value="" maxlength="16" size="16" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>31~26</td>
<td>25~ 21</td>
<td>20~16</td>
<td>15~0</td>
</tr>
</tbody>
</table>
<div id="sol-ExB" class="bloco solucao">
<div class="conteudo">
<p style="color:red">
Solução:
</p>
<table>
<thead>
<tr class="header">
<th align="center">opcode</th>
<th align="center">Rs</th>
<th align="center">Rt</th>
<th align="center">imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">16 bits</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">100011</td>
<td align="center">11101</td>
<td align="center">01000</td>
<td align="center">0000000001001000</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">31~26</td>
<td align="center">25~ 21</td>
<td align="center">20~16</td>
<td align="center">15~0</td>
</tr>
</tbody>
</table>
</div>
<button onclick="exibe(this)">
Ver Solução
</button>
</div>
<hr />
<p><br></p>
<h2 id="exercício-c">Exercício C</h2>
<p>Para a instrução:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    sw  <span class="dv">$</span>t1,  <span class="dv">4</span>(<span class="dv">$</span>sp):</code></pre></div>
<p>Qual seria a sua codificação?</p>
<table>
<thead>
<tr class="header">
<th>opcode</th>
<th>Rs</th>
<th>Rt</th>
<th>imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>16 bits</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><input type="text" id="C1" value="" maxlength="6" size="6" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="C2" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="C3" value="" maxlength="5" size="5" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
<td><input type="text" id="C4" value="" maxlength="16" size="16" onkeyup="validaBinario(id)" onchange="validaBinario(id)"></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>31~26</td>
<td>25~ 21</td>
<td>20~16</td>
<td>15~0</td>
</tr>
</tbody>
</table>
<div id="sol-ExC" class="bloco solucao">
<div class="conteudo">
<p style="color:red">
Solução:
</p>
<table>
<thead>
<tr class="header">
<th align="center">opcode</th>
<th align="center">Rs</th>
<th align="center">Rt</th>
<th align="center">imediato</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6 bits</td>
<td align="center">5 bits</td>
<td align="center">5 bits</td>
<td align="center">16 bits</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">101011</td>
<td align="center">11101</td>
<td align="center">01001</td>
<td align="center">0000000000000100</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">31~26</td>
<td align="center">25~ 21</td>
<td align="center">20~16</td>
<td align="center">15~0</td>
</tr>
</tbody>
</table>
</div>
<button onclick="exibe(this)">
Ver Solução
</button>
</div>
<hr />
<p><br></p>
<h2 id="atividade">Atividade</h2>
<p>Faça a análise das instruções anteriores:</p>
<ul>
<li><p>Na sequência:</p>
<ul>
<li>LW, SW e BEQ (fica mais fácil).</li>
</ul></li>
<li><p>Descreva o funcionamento RTL da arquitetura para implementá-las;</p></li>
<li><p>Esboce o caminho de dados;</p></li>
</ul>
<p>Simule o funcionamento de cada instrução;</p>
<ul>
<li>Se não estiver bom, reinicie o processo.</li>
</ul>
<p>Com o caminho de dados pronto:</p>
<ul>
<li>Implemente em VHDL e simule.</li>
</ul>
<p>Quando estiver funcional:</p>
<ul>
<li><p>Mescle com o caminho de dados para as instruções do tipo R.</p></li>
<li><p>Implemente no kit de desenvolvimento:</p></li>
<li><p>E faça os testes necessários.</p></li>
</ul>
<h4 id="dicas">Dicas</h4>
<p>Para determinar a estrutura de hardware necessária para implementar instruções do tipo I, veremos suas características.</p>
<p>As instruções do tipo I:</p>
<ul>
<li><p>Utilizam 2 registradores;</p></li>
<li><p>O campo opcode define qual instrução será executada;</p></li>
<li><p>O campo &quot;imediato&quot; possui um inteiro, com sinal, de 16 bits (complemento de 2).</p></li>
</ul>
<p>A função dos registradores:</p>
<ul>
<li><p>Rt contém um argumento da operação;</p></li>
<li><p>Rs é o destino do resultado da operação.</p></li>
</ul>
<p>A instrução <strong>LW</strong>:</p>
<div class="sourceCode"><pre class="sourceCode asm"><code class="sourceCode fasm">    lw  <span class="dv">$</span>rt,  imediato(<span class="dv">$</span>rs)<span class="co">;</span></code></pre></div>
<p>Carrega o dado, em <em>$rt</em>, da posição da memória principal indicada por <em>imediato($rs)</em>.</p>
<p>Onde, o valor do <em>imediado</em> é somado ao valor de <em>$rs</em> e deverá ser o endereço da memória.</p>
<p>Para somar o <em>imediato</em>, precisamos estender o seu sinal.</p>
<p>O conteúdo desse endereço será escrito no registrador <em>$rt</em>.</p>
<p>Para executar essas funções, precisaremos de:</p>
<p><strong>Memória:</strong></p>
<div class="figure">
<img src="imagensComponentes/MemoriaRAM(dados).svg" width="400" />

</div>
<div class="figure">
<img src="imagensComponentes/memoriaROM(Instrucoes).svg" width="300" />

</div>
<p><strong>Banco de Registradores:</strong></p>
<div class="figure">
<img src="imagensComponentes/arquivoRegistradores-1.svg" width="400" />

</div>
<p><strong>Extensor de Sinal:</strong></p>
<div class="figure">
<img src="imagensComponentes/extensorSinal.svg" width="400" />

</div>
<p><strong>ULA:</strong></p>
<div class="figure">
<img src="imagensComponentes/ULA.svg" width="400" />

</div>
<p><strong>Registradores:</strong></p>
<div class="figure">
<img src="imagensComponentes/registradorGenerico&amp;EnablePCFS.svg" width="200" />

</div>
<p><strong>Para mesclar com o FD das instruções do tipo R, precisaremos do MUX:</strong></p>
<div class="figure">
<img src="imagensComponentes/Multiplexer_N-2N.svg" width="300" />

</div>
<p><br><br></p>
<p>Para iniciar, use o fluxo de dados das instruções do tipo R como referência:</p>
<div class="figure">
<img src="imagensMIPS/fluxoInstrucoesAritmeticasComentado-a.svg" width="800" />

</div>
<hr />
<h2 id="referências">Referências</h2>
<h3 id="rtn">RTN</h3>
<div id="RTN" class="bloco solucao">
<div class="conteudo">
<p style="color:red">
Conteúdo:
</p>
<p><strong>Básico sobre RTN (register transfer notation)</strong></p>
<p><strong>Formaliza a descrição:</strong></p>
<ul>
<li><p>Do funcionamento:</p>
<ul>
<li>RTN abstrata, usa a arquitetura;</li>
</ul></li>
<li><p>Da estrutura:</p>
<ul>
<li><p>RTN concreta, usa a organização:</p>
<ul>
<li>Cada passo é um pulso de clock.</li>
</ul></li>
</ul></li>
<li><p>É um misto de linguagem natural e expressões matemáticas:</p>
<ul>
<li>Estabelece a relação entre o que está do lado esquerdo do símbolo com o que está do lado direito.</li>
</ul></li>
<li><p>As transferências só acontecem no pulso de clock;</p></li>
<li><p>Considera que os sinais estão estáveis no momento do clock;</p></li>
<li><p>Considera que a lógica combinacional tem resposta instantânea.</p></li>
</ul>
<p><br></p>
<p><strong>Símbolos Utilizados:</strong></p>
<table style="width:53%;">
<colgroup>
<col width="9%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Símbolo</th>
<th>Significado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">&lt;-</td>
<td>Transferência entre registradores: Regesquerda recebe o valor do Regdireita .</td>
</tr>
<tr class="even">
<td align="center">[ ]</td>
<td>Índice de Word: seleciona uma palavra, ou a faixa de palavras, da memória indicada.</td>
</tr>
<tr class="odd">
<td align="center">&lt; &gt;</td>
<td>Índice de Bit: seleciona a faixa de bits ou um bit da memória indicada.</td>
</tr>
<tr class="even">
<td align="center">n...m</td>
<td>Índice de Faixa: indica a faixa da esquerda para a direita (pode ser decrescente).</td>
</tr>
<tr class="odd">
<td align="center">-&gt;</td>
<td>If-then: verdadeiro na esquerda implica receber valor ou aplicar ação na direita.</td>
</tr>
<tr class="even">
<td align="center">:=</td>
<td>Definição: ajuda a documentar. ld(opcode:=3) → R[ra] ← M[MA]</td>
</tr>
<tr class="odd">
<td align="center">#</td>
<td>Concatenação de bits.</td>
</tr>
<tr class="even">
<td align="center">:</td>
<td>Separador de ações que acontecem em paralelo.</td>
</tr>
<tr class="odd">
<td align="center">;</td>
<td>Separador de ações que acontecem em sequência: da esquerda para direita.</td>
</tr>
<tr class="even">
<td align="center">@</td>
<td>Repete o número de vezes, da direita, o que está na esquerda (concatena).</td>
</tr>
<tr class="odd">
<td align="center">{ }</td>
<td>Modificador de operação.</td>
</tr>
<tr class="even">
<td align="center">( )</td>
<td>Agrupamento de operações ou valores.</td>
</tr>
<tr class="odd">
<td align="center">= ≠ &lt; ≤ ≥ &gt;</td>
<td>Operadores de comparação, retorna valores binários (≠ pode ser: !=).</td>
</tr>
<tr class="even">
<td align="center">+ - * /</td>
<td>Operadores aritméticos.</td>
</tr>
<tr class="odd">
<td align="center">^v¬⊕≡</td>
<td>Operadores lógicos: and, or, not, xor, equivalência. Pode usar: &amp; | !</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Exemplos:</strong></p>
<ul>
<li><p>Flip-flop: A ← B</p></li>
<li><p>Registrador: A&lt;m..1&gt; ← B&lt;m..1&gt;</p></li>
<li><p>Incremento do PC: PC ← PC + 4</p></li>
<li><p>Carrega instrução da memória:</p>
<ul>
<li><p>RTN abstrata:</p>
<ul>
<li>IR ← M[PC]</li>
</ul></li>
<li><p>RTN concreta:</p>
<ul>
<li><p>MAd ← PC : C ← PC + 4</p></li>
<li><p>MD ← M[MAd] : PC ← C</p></li>
<li><p>IR ← MD</p></li>
</ul></li>
</ul></li>
<li><p>Extensão de sinal de 16 para 32 bits, do Reg1:</p>
<ul>
<li>(16@Reg1&lt;15&gt;#Reg1&lt;15..0&gt;)</li>
</ul></li>
<li><p>Seleção de registrador (rn) no banco de regs.:</p>
<ul>
<li>A ← (rn = 0 → 0 : rn != 0 → R[rn] )</li>
</ul></li>
</ul>
</div>
<button onclick="exibe(this)">
Ver Conteúdo
</button>
</div>
<hr />
<p>Solução do fluxo de dados para <em>lw</em> e <em>sw</em>:</p>
<div id="sol-FDTipoI" class="bloco solucao">
<div class="conteudo">
<p style="color:red">
Solução:
</p>
<div class="figure">
<img src="imagensMIPS/decomposicaoInstrucoes_Lw_Sw_cicloUnico-a.svg" title="Não Disponível" width="800" />

</div>
</div>
<button onclick="exibe(this)">
Ver Solução
</button>
</div>
<hr />
<p><a href="./linksUteis.html">Página com links</a> de referências sobre VHDL, Quartus, etc ...</p>
<p><a name="fimDocumento"></a> <a href="#inicio">Ir para o início do documento</a>.</p>
<hr />
<p><br></p>
<hr />
<hr />
<!-- FIM -->
<!---
######### (inicio dos links) ##########
#######################################
########### Links Internos ############
--->
</body>
</html>
